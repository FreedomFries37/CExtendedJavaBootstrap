#include "prelude.h"
#include "LinkedList.h"

in ll {
	implement Node {
		void* get_value_ptr() {
			return this->value_ptr;
		}

		void set_value_ptr(void* val) {
			this->value_ptr = val;
		}
	}

	implement IntLinkedList {

		void add(int element) {
			Node n = this->get_nth_node(this->size-1);
			int* val = malloc(sizeof(int));
			*val = element;
			Node next = new Node(val);
			n->next = next;
			next->prev = n;
			++this->size;
		}



		Node get_nth_node(int n) {
			Node ptr = this->head;
			for(int i = 0; i < n; i++) {
				ptr = ptr->next;
			}
			return ptr;
		}

		int get(int index) {
			return * (int *) this->get_nth_node(index)->get_value_ptr();
		}

		int size() {
			return this->size;
		}

		bool remove_nth_element(int n) {
			if (n < 0 || n >= this->size()) return false;
			Node ptr = this->head;
			for(int i = 0; i < n; i++) {
				ptr = ptr->next;
			}
			Node prev = ptr->prev;
			Node next = ptr->next;

			if(prev != nullptr) {
				prev->next = next;
			} else {
				this->head = next;
			}

			if(next != nullptr) {
				next->prev = prev;
			} else {
				this->tail = prev;
			}


			--this->size;

			return true;
		}

		bool remove(int value) {
			for (int i = 0; i < this->size(); ++i) {
				Node n = this->get_nth_node(i);
				if (*(int *) n->get_value_ptr() == value) {

					return this->remove_nth_element(i);
				}
			}

			return false;
		}
	}
}


bool boolean_test() {
	bool t = !(bool) 0;
	bool f = (bool) 0;
	if(t != true) {
		return false;
	}
	if(f != false) {
		return false;
	}

	return true;
}